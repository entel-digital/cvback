import{e as G,f as J,a as Z}from"./QBtn.0545539b.js";import{u as ee,c as te}from"./focus-manager.2fbb7ce5.js";import{r as O,c as i,h as v,g as oe,ab as m,W as q,u as le,A as re,ac as P,a2 as g,C as d,ad as ne}from"./index.aca000eb.js";import{u as se,b as ae}from"./private.use-form.bf034801.js";import{a as ie,h as ue}from"./render.1220120f.js";import{b as ce,a as de,h as fe}from"./scroll.459c07c0.js";function ve(t,o){const e=O(null),r=i(()=>t.disable===!0?null:v("span",{ref:e,class:"no-outline",tabindex:-1}));function n(a){const s=o.value;a!==void 0&&a.type.indexOf("key")===0?s!==null&&document.activeElement!==s&&s.contains(document.activeElement)===!0&&s.focus():e.value!==null&&(a===void 0||s!==null&&s.contains(a.target)===!0)&&e.value.focus()}return{refocusTargetEl:r,refocusTarget:n}}var me={xs:30,sm:35,md:40,lg:50,xl:60};const ge={...te,...J,...se,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},pe=["update:modelValue"];function be(t,o){const{props:e,slots:r,emit:n,proxy:a}=oe(),{$q:s}=a,B=ee(e,s),C=O(null),{refocusTargetEl:E,refocusTarget:M}=ve(e,C),F=G(e,me),p=i(()=>e.val!==void 0&&Array.isArray(e.modelValue)),k=i(()=>{const l=m(e.val);return p.value===!0?e.modelValue.findIndex(c=>m(c)===l):-1}),u=i(()=>p.value===!0?k.value!==-1:m(e.modelValue)===m(e.trueValue)),w=i(()=>p.value===!0?k.value===-1:m(e.modelValue)===m(e.falseValue)),I=i(()=>u.value===!1&&w.value===!1),W=i(()=>e.disable===!0?-1:e.tabindex||0),R=i(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(B.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),X=i(()=>{const l=u.value===!0?"truthy":w.value===!0?"falsy":"indet",c=e.color!==void 0&&(e.keepColor===!0||(t==="toggle"?u.value===!0:w.value!==!0))?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${l}${c}`}),Y=i(()=>{const l={type:"checkbox"};return e.name!==void 0&&Object.assign(l,{".checked":u.value,"^checked":u.value===!0?"checked":void 0,name:e.name,value:p.value===!0?e.val:e.trueValue}),l}),j=ae(Y),Q=i(()=>{const l={tabindex:W.value,role:t==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":I.value===!0?"mixed":u.value===!0?"true":"false"};return e.disable===!0&&(l["aria-disabled"]="true"),l});function x(l){l!==void 0&&(q(l),M(l)),e.disable!==!0&&n("update:modelValue",D(),l)}function D(){if(p.value===!0){if(u.value===!0){const l=e.modelValue.slice();return l.splice(k.value,1),l}return e.modelValue.concat([e.val])}if(u.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(w.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function K(l){(l.keyCode===13||l.keyCode===32)&&q(l)}function N(l){(l.keyCode===13||l.keyCode===32)&&x(l)}const U=o(u,I);return Object.assign(a,{toggle:x}),()=>{const l=U();e.disable!==!0&&j(l,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const c=[v("div",{class:X.value,style:F.value,"aria-hidden":"true"},l)];E.value!==null&&c.push(E.value);const L=e.label!==void 0?ie(r.default,[e.label]):ue(r.default);return L!==void 0&&c.push(v("div",{class:`q-${t}__label q-anchor--skip`},L)),v("div",{ref:C,class:R.value,...Q.value,onClick:x,onKeydown:K,onKeyup:N},c)}}var Ce=le({name:"QToggle",props:{...ge,icon:String,iconColor:String},emits:pe,setup(t){function o(e,r){const n=i(()=>(e.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),a=i(()=>e.value===!0?t.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[v(Z,{name:n.value,color:a.value})]:void 0)]}return be("toggle",o)}});function Ee(t,o,e){let r;function n(){r!==void 0&&(P.remove(r),r=void 0)}return re(()=>{t.value===!0&&n()}),{removeFromHistory:n,addToHistory(){r={condition:()=>e.value===!0,handler:o},P.add(r)}}}let b=0,S,V,h,T=!1,_,$,H,f=null;function he(t){we(t)&&q(t)}function we(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const o=ne(t),e=t.shiftKey&&!t.deltaX,r=!e&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),n=e||r?t.deltaY:t.deltaX;for(let a=0;a<o.length;a++){const s=o[a];if(fe(s,r))return r?n<0&&s.scrollTop===0?!0:n>0&&s.scrollTop+s.clientHeight===s.scrollHeight:n<0&&s.scrollLeft===0?!0:n>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function z(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function y(t){T!==!0&&(T=!0,requestAnimationFrame(()=>{T=!1;const{height:o}=t.target,{clientHeight:e,scrollTop:r}=document.scrollingElement;(h===void 0||o!==window.innerHeight)&&(h=e-o,document.scrollingElement.scrollTop=r),r>h&&(document.scrollingElement.scrollTop-=Math.ceil((r-h)/8))}))}function A(t){const o=document.body,e=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:n}=window.getComputedStyle(o);S=ce(window),V=de(window),_=o.style.left,$=o.style.top,H=window.location.href,o.style.left=`-${S}px`,o.style.top=`-${V}px`,n!=="hidden"&&(n==="scroll"||o.scrollWidth>window.innerWidth)&&o.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||o.scrollHeight>window.innerHeight)&&o.classList.add("q-body--force-scrollbar-y"),o.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,g.is.ios===!0&&(e===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",y,d.passiveCapture),window.visualViewport.addEventListener("scroll",y,d.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",z,d.passiveCapture))}g.is.desktop===!0&&g.is.mac===!0&&window[`${t}EventListener`]("wheel",he,d.notPassive),t==="remove"&&(g.is.ios===!0&&(e===!0?(window.visualViewport.removeEventListener("resize",y,d.passiveCapture),window.visualViewport.removeEventListener("scroll",y,d.passiveCapture)):window.removeEventListener("scroll",z,d.passiveCapture)),o.classList.remove("q-body--prevent-scroll"),o.classList.remove("q-body--force-scrollbar-x"),o.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,o.style.left=_,o.style.top=$,window.location.href===H&&window.scrollTo(S,V),h=void 0)}function ye(t){let o="add";if(t===!0){if(b++,f!==null){clearTimeout(f),f=null;return}if(b>1)return}else{if(b===0||(b--,b>0))return;if(o="remove",g.is.ios===!0&&g.is.nativeMobile===!0){f!==null&&clearTimeout(f),f=setTimeout(()=>{A(o),f=null},100);return}}A(o)}function Ie(){let t;return{preventBodyScroll(o){o!==t&&(t!==void 0||o===!0)&&(t=o,ye(o))}}}function Le(t,o,e){return e<=o?o:Math.min(e,Math.max(o,t))}function Pe(t,o,e){if(e<=o)return o;const r=e-o+1;let n=o+(t-o)%r;return n<o&&(n=r+n),n===0?0:n}export{Ce as Q,Ie as a,Le as b,ge as c,pe as d,be as e,Pe as n,Ee as u};
